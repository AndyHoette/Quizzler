{% extends "base.html.jinja2" %}

{% block content %}
    <form>
        {{ quiz.csrf_token }}
        {% for k in quiz_data['mcq'] %}
            {% set key = 'mcq'+(loop.index0|string) %}
            {% set correct_answer = quiz_data['mcq'][loop.index0]['options'][quiz_data['mcq'][loop.index0]['answer']] %}
            {% set correct = (correct_answer == (quiz|attr(key)).data) %}
            <div class="{{ 'correct' if correct else 'incorrect'}}">
                {{ (quiz|attr(key)).label }}
                {{ quiz|attr(key)() }}
                {% if not correct %}
                    <div>Correct answer: {{ correct_answer }}</div>
                {% endif %}
            </div>
        {% endfor %}
    </form>
{% endblock %}